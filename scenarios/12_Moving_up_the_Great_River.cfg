#textdomain wesnoth-merfolk_campaign

[scenario]
    name= _ "Moving up the Great River"
    map_file=12_Moving_up_the_Great_River.map

    id=12_Moving_up_the_Great_River
    next_scenario=null             ##################

    {INTRO_AND_SCENARIO_MUSIC frantic.ogg loyalists.ogg}
    {EXTRA_SCENARIO_MUSIC vengeful.ogg}
    {EXTRA_SCENARIO_MUSIC transience.ogg}

    {DEFAULT_SCHEDULE_DUSK}

    [story]
        [part]
            story= _ "Danielle and part of the merfolk army take the lead to scout the great river. (more story TBD)."
        [/part]
    [/story]

    turns=7
    victory_when_enemies_defeated=yes

    [side]
        side=1
        controller=human

        ## Recruit list and recall list has to be soft wiped (only for this scenario) from land units
        recruit=Merman Hunter,Merman Fighter,Mermaid Initiate, Merman Citizen
        team_name=good

        user_team_name= _ "Danielle"

        color=red

        {GOLD 350 250 175}

        type=Mermaid Enchantress ##FOR INDEPENDENCE PURPOSES, MUST BE REMOVED WHEN SCENARIOS ARE MERGED.
        id=Danielle
        name= _ "Danielle"

        x,y=3,25

        fog=yes

        ## For debug purposes
        suppress_end_turn_confirmation=yes
    [/side]
    [side]
        side=2
        controller=ai
        recruit=Walking Corpse, Soulless
        team_name=enemy
        user_team_name= _ "Undead"
        color=blue

        {GOLD 100 999 999} ## Why 999 gold? It is meant to be very anoying if not rushed early.

        type=Soulless
        id=Soulless_leader
        name= _ "Soulless"
        x,y=16,41

        color=blue
    [/side]

    ## Side 2 can recruit Walking Corpse variations
    {RECRUIT_UNIT_VARIATIONS 2 "Walking Corpse" swimmer}
    {RECRUIT_UNIT_VARIATIONS 2 "Soulless" swimmer}
    [side]
    	side=3
    	controller=ai
    	hidden=true

    	recruit=Saurian Augur, Saurian Skirmisher, Saurian Oracle, Saurian Ambusher

    	{GOLD 0 0 0}
    	income=-2

    	team_name=enemy
        user_team_name= _ "Saurians"

    	type=Saurian Flanker
    	id=Skrasssn
    	name= _ "Skrasssn"

    	x,y=52,13

    	color=green
    [/side]
    [side]
    	side=4
    	controller=ai
    	hidden=true

    	recruit=Walking Corpse, Soulless, Skeleton, Skeleton Archer, Bone Shooter, Deathblade, Revenant, Ghoul, Necrophage, Ghost, Shadow, Wraith

    	{GOLD 100 150 200}
    	income=15

    	team_name=enemy
        user_team_name= _ "Undead"

    	type=Lich
    	id=Mal Rufinal
    	name= _ "Mal Rufinal"

    	x,y=74,40

    	color=black
    [/side]

    {RECRUIT_UNIT_VARIATIONS 4 "Walking Corpse" swimmer}
    {RECRUIT_UNIT_VARIATIONS 4 "Soulless" swimmer}

    [side]
    	side=5
    	controller=null
    	no_leader=yes
    	hidden=yes

    	team_name=good
        user_team_name= _ "The fleet"

    	color=white
    [/side]

    [side]
    	side=6
    	controller=ai
    	no_leader=yes
    	hidden=yes

    	team_name=enCemy
        user_team_name= _ "Monsters"

    	color=teal
    [/side]


    ## ---------------------- START AND PRESTART EVENTS -----------------------------------

    [event]
        name=prestart

		## Objectives

		[objectives]
            side=1
            [objective]
                condition=win
                description= _ "Prepare for the arrival of the fleet on the eastmost corner"
            [/objective]
            [objective]
                condition=win
                description= _ "Kill enemy leaders"
                caption= _ "early finish bonus:"
            [/objective]
            [objective]
            	condition=lose
             	description= _ "Death of Daniellle"
            [/objective]
            [gold_carryover]
                bonus=yes
                carryover_percentage=40
            [/gold_carryover]
            note= _ "You may want to explore a little bit"
        [/objectives]

        ## Elven castle mask

        [terrain_mask]
        	x,y=1,1
        	mask="{~add-ons/merfolk_campaign/masks/12_Moving_up_the_Great_River.mask}"
        [/terrain_mask]

        ## Modify side 3 so the leader cannot move (and capture) so the player has to find out what is happening first (sighting event)
        
        [modify_unit]
        	[filter]
        		side=3
        	[/filter]
        	ai_special=guardian
        [/modify_unit]

        ## Variable for the number of galleons saved and killed

        [set_variable]
    		name=gal_saved
    		value=0
		[/set_variable]

		[set_variable]
    		name=gal_killed
    		value=0
		[/set_variable]

		## Variable for secret event

		[set_variable]
    		name=unit_comes_back
    		value=0
		[/set_variable]


		## Another "secret" event

        {PLACE_IMAGE items/large_cage.png 53 13}

        ## Hangout time

        [set_variable]
    		name=turn_extension
    		value=0
		[/set_variable]
		[set_variable]
    		name=already_asked_to_leave
    		value=0
		[/set_variable]

		## Stuck boats

		[set_variable]
    		name=gal1_is_unstuck
    		value=0
		[/set_variable]
		[set_variable]
    		name=gal2_is_unstuck
    		value=0
		[/set_variable]
		[set_variable]
    		name=gal3_is_unstuck
    		value=0
		[/set_variable]

		## I dont know how arrays work
		
		{VARIABLE gal1_turn_1 0}
		{VARIABLE gal1_turn_2 0}
		{VARIABLE gal1_turn_3 0}
		{VARIABLE gal1_turn_4 0}
		{VARIABLE gal1_turn_5 0}
		{VARIABLE gal2_turn_1 0}
		{VARIABLE gal2_turn_2 0}
		{VARIABLE gal2_turn_3 0}
		{VARIABLE gal2_turn_4 0}
		{VARIABLE gal2_turn_5 0}
		{VARIABLE gal3_turn_1 0}
		{VARIABLE gal3_turn_2 0}
		{VARIABLE gal3_turn_3 0}
		{VARIABLE gal3_turn_4 0}
		{VARIABLE gal3_turn_5 0}


    [/event]

    [event]
    	name=start
    	[message]
            speaker=Danielle
            message = _ "Oh, the great river. Tales talk about the merfolk who used to live here, whose last commander was called Okean. Legends say they were slaughtered by a powerful necromancer, maybe we will find his soul and put it to rest."
        [/message]
        {NAMED_GENERIC_UNIT 1 "Merman Fighter" 1 25 "Adviser" "Adviser"}
        [message]
        	speaker=Adviser	#Probably one of the naga that accompannies Danielle, it is TBD as this map is very advanced in time fo RN.
        	message= _ "SPEAKER TBD. I do not think that is going to be easy, there are encampments on that swamp!"
        [/message]
        ## Camera moves to the swamp and a fighting icon is shown
        {HIGHLIGHT_IMAGE 16 41 items/gohere.png ()}
        [delay]
        	time=1000
        [/delay]
        [remove_item]
                x=16
                y=41
        [/remove_item]
        {SCROLL_TO 5 25}
        [message]
        	speaker=Danielle
        	message= _ "Let's settle on the north side of the River, I hope elves dont mind us being here"
        [/message]
        ## Encampment is settled
        [move_unit]
        	id=Danielle
        	to_x=13
        	to_y=17
        [/move_unit]
        {SCROLL_TO 13 17}
        [move_unit]
        	id=Adviser
        	to_x=12
        	to_y=17
        [/move_unit]
        {SET_CAMP 13 17 Ke 1 300 0}
        {SET_CAMP 12 17 Ce 1 300 0}
        [move_unit]
        	id=Adviser
        	to_x=12
        	to_y=16
        [/move_unit]
        {SET_CAMP 12 16 Ce 1 300 0}
        [move_unit]
        	id=Adviser
        	to_x=13
        	to_y=16
        [/move_unit]
        {SET_CAMP 13 16 Ce 1 300 0}
        [move_unit]
        	id=Adviser
        	to_x=14
        	to_y=16
        [/move_unit]
        {SET_CAMP 14 16 Ce 1 300 0}
        [move_unit]
        	id=Adviser
        	to_x=14
        	to_y=17
        [/move_unit]
        {SET_CAMP 14 17 Ce 1 300 0}
        [move_unit]
        	id=Adviser
        	to_x=13
        	to_y=18
        [/move_unit]
        {SET_CAMP 13 18 Ce 1 300 0}
        ## A Scout appears, bringin news about the fleet.
        {NAMED_GENERIC_UNIT 1 "Merman Hunter" 1 25 "Scout" "Scout"}
        [move_unit]
        	id=Scout
        	to_x=12
        	to_y=17
        [/move_unit]
        [message]
        	speaker=Scout #same as before
        	message= _ "Kai Danielle! the fleet will arrive tomorrow, so far we have not seen any threats."
        [/message]
        [message]
        	speaker=Danielle
        	message= _ "Tell them that we may have unforeseen company."
        [/message]
        [message]
        	speaker=Scout
        	message= _ "As you command."
        [/message]
        [move_unit]
        	id=Scout
        	to_x=1
        	to_y=23
        [/move_unit]
        [kill]
        	id=Scout
        [/kill]
    [/event]
    ## ---------------------- END OF START AND PRESTART EVENTS ----------------------------

    ## ---------------------- SCENARIO EVENTS ---------------------------------------------

    ## Player discovers walking corpses south of the river

    [event]
    	name=sighted
    	[filter]
    		side=2
    	[/filter]
    	[filter_second]
    		side=1
    	[/filter_second]
    	[sound]
    		name=zombie-hit-1.ogg
    		repeat=0
    	[/sound]
    	[message]
    		speaker=unit
    		message= _ "..."
    	[/message]
    	[message]
    		speaker=second_unit
    		message= _ "Oh so there are undead, as expected by this fog."
    	[/message]
    [/event]

    ## Player discovers there were never elves in the north of the river

    [event]
    	name=moveto
    	[filter]
    		side=1
    		x=36-67
    		y=1-23
    	[/filter]
    	## Corrupted elven castle
    	[terrain_mask]
        	x,y=1,1
        	mask="{~add-ons/merfolk_campaign/masks/12_Moving_up_the_Great_River_Corrupted.mask}"
        [/terrain_mask]
        [redraw]
        	side=1
        [/redraw]
        {CLEAR_FOG 52 13 3}
        {SCROLL_TO 52 13}
        [message]
        	speaker=Skrasssn
        	message= _ "Merfolk are closssing in, attack!"
        [/message]
        {GENERIC_UNIT 3 "Saurian Ambusher" 52 13}
        {GENERIC_UNIT 3 "Saurian Ambusher" 52 13}
        {GENERIC_UNIT 3 "Saurian Ambusher" 52 13}
        {GENERIC_UNIT 3 "Saurian Oracle" 52 13}
        {GENERIC_UNIT 3 "Saurian Soothsayer" 52 13}
        {GENERIC_UNIT 3 "Saurian Skirmisher" 52 13}
        [gold]
        	side=3
#ifdef EASY
			amount=100
#endif
#ifdef NORMAL
			amount=200
#endif
#ifdef HARD
			amount=300
#endif
        [/gold]
        [message]
        	speaker=unit
        	message= _ "Oh no, those are not friendly elves, what have they done to the forest?"
        [/message]
        {SCROLL_TO 53 13}
        {HIGHLIGHT_IMAGE 53 13 items/large_cage.png items/large_cage.png}
        {PLACE_IMAGE "units/elves-wood/druid-magic-1.png~TC(2,magenta)" 53 13}
        {PLACE_IMAGE items/large_cage.png 53 13}
        [message]
        	speaker=Danielle
        	message= _ "And why have they got an elf imprisoned? We should save her!"
        [/message]
    [/event]

    ## Player discovers lich

    [event]
    	name=sighted
    	[filter]
    		side=4
    	[/filter]
    	[filter_second]
    		side=1
    	[/filter_second]
    	[sound]
    		name=wail-long.wav
    		repeat=0
    	[/sound]
    	[message]
    		speaker=unit
    		message= _ "..."
    	[/message]
    	[message]
    		speaker=second_unit
    		message= _ "This is getting scarier."
    	[/message]
    [/event]

    ## --------------------------------------- SECRETS ------------------------------------

#ifdef EASY
    {MOVETO_GOLD_EVENT 11 41 1 150}
    {MOVETO_GOLD_EVENT 16 41 1 150}
    {MOVETO_GOLD_EVENT 56 3 1 150}
    {MOVETO_GOLD_EVENT 67 50 1 150}
    {MOVETO_GOLD_EVENT 74 53 1 150}
#endif
#ifdef NORMAL
    {MOVETO_GOLD_EVENT 11 41 1 100}
    {MOVETO_GOLD_EVENT 16 41 1 100}
    {MOVETO_GOLD_EVENT 56 3 1 100}
    {MOVETO_GOLD_EVENT 67 50 1 50}
    {MOVETO_GOLD_EVENT 74 53 1 50}
#endif
#ifdef HARD
    {MOVETO_GOLD_EVENT 11 41 1 25}
    {MOVETO_GOLD_EVENT 16 41 1 25}
    {MOVETO_GOLD_EVENT 56 3 1 75}
    {MOVETO_GOLD_EVENT 67 50 1 25}
    {MOVETO_GOLD_EVENT 74 53 1 25}
#endif
	[event]
        name=moveto
        first_time_only=yes
        [filter]
            side=1
            x=39
            y=31
            radius=1
        [/filter]
        [message]
            speaker=unit
            message= _ "So this was Okean's keep... I wonder if there is anything of value inside."
        [/message]
        [message]
        	speaker=unit
        	[option]
        		label= _ "I will go in!"
        		[command]
        			[set_variable]
        				name=unit_comes_back
        				value=$turn_number
        			[/set_variable]
        			[set_variable]
        				name=unit_comes_back
#ifdef EASY
        				add=1
#endif
#ifdef NORMAL
        				add=2
#endif
#ifdef HARD
        				add=3
#endif
        			[/set_variable]
        			[store_unit]
        				[filter]
        					x,y=39,31
        				[/filter]
        				kill=yes
        				variable=castle_unit
        			[/store_unit]
        		[/command]
        	[/option]
        	[option]
        		label= _ "I dont think we should mess up with the ruins."
        	[/option]
        [/message]
    [/event]
    [event]
    	name=turn $unit_comes_back
    	{CLEAR_FOG $castle_unit.x $castle_unit.y 6}
    	[unstore_unit]
    		variable=castle_unit
    		x=$castle_unit.x
    		y=$castle_unit.y
    	[/unstore_unit]
    	[message]
    		speaker=$castle_unit.id
    		message= _ "Look who has come back from the dead!"
    	[/message]
#ifdef EASY
    	{NAMED_LOYAL_UNIT 1 Nightgaunt 39 31 Okean Okean}
#endif
#ifdef NORMAL
    	{NAMED_LOYAL_UNIT 1 Shadow 39 31 Okean Okean}
#endif
#ifdef HARD
    	{NAMED_LOYAL_UNIT 1 Ghost 39 31 Okean Okean}
#endif
    	[message]
    		speaker=Danielle
    		message= _ "More undead? Kill it!"
    	[/message]
    	{SCROLL_TO 39 31}
    	[message]
    		speaker=Okean
    		message= _ "No, wait! Im not controlled by any necromancer, I have chosen this form because my will would not let me die"
    	[/message]
    	[message]
    		speaker=Danielle
    		message= _ "What do you mean?"
    	[/message]
    	{SCROLL_TO 39 31}
    	[message]
    		speaker=Okean
    		message= _ "I shall fight until this keep is reconstructed and life emerges from it again!"
    	[/message]
    	[message]
    		[option]
    			label= _ "Okey, you can join us."
    		[/option]
    		[option]
    			label= _ "I dont trust you."
    			[command]
    				[message]
    					speaker=Okean
    					message= _ "Then I will go"
    				[/message]
    				{SCROLL_TO 39 31}
    				[kill]
    					id=Okean
    					animate=yes
    				[/kill]
    			[/command]
    		[/option]
    	[/message]
    [/event]

    [event]
    	name=moveto
    	[filter]
    		side=1,5
    		x=45-60
    		y=30-40
    	[/filter]
    	{GENERIC_UNIT 6 "Cuttle Fish" 53 30}
    	{GENERIC_UNIT 6 "Sea Serpent" 53 37}
    	{GENERIC_UNIT 6 "Water Serpent" 53 37}
    	{GENERIC_UNIT 6 "Tentacle of the Deep" 53 37}
    	{GENERIC_UNIT 6 "Tentacle of the Deep" 53 37}
#ifdef NORMAL
		{GENERIC_UNIT 6 "Cuttle Fish" 53 30}
		{GENERIC_UNIT 6 "Water Serpent" 53 37}
    	{GENERIC_UNIT 6 "Tentacle of the Deep" 53 37}
    	{GENERIC_UNIT 6 "Tentacle of the Deep" 53 37}
#endif
#ifdef HARD
		{GENERIC_UNIT 6 "Sea Serpent" 53 37}
		{GENERIC_UNIT 6 "Cuttle Fish" 53 30}
		{GENERIC_UNIT 6 "Cuttle Fish" 53 30}
    	{GENERIC_UNIT 6 "Water Serpent" 53 37}
    	{GENERIC_UNIT 6 "Water Serpent" 53 37}
    	{GENERIC_UNIT 6 "Tentacle of the Deep" 53 37}
    	{GENERIC_UNIT 6 "Tentacle of the Deep" 53 37}
#endif
		[message]
			speaker=unit
			message= _ "Uh oh."
		[/message]
    [/event]

    [event]
    	name=moveto
    	[filter]
    		side=1,2,3,4
    		x=27
    		y=46
    		radius=1
    	[/filter]
    	{NAMED_GENERIC_UNIT 1 "Dwarvish Lord" 27 46 Nunglef Nunglef} ## This has to be decided, traits, if he even exists, what does he want...
    	{SCROLL_TO 27 46}
    	{CLEAR_FOG 27 46 3}
    	[message]
    		speaker=Nunglef
    		message= _ "What are you doing so close to my house! Cant a dwarf rest away from combat?"
    	[/message]
    	[message]
    		speaker=Danielle
    		message= _ "Hello, sir dwarf..."
    	[/message]
    	[message]
    		speaker=Nunglef
    		message= _ "My name is Nunglef"
    	[/message]
    	[message]
    		speaker=Danielle
    		message= _ "Oh, sorry, sir Nunglef. Would you join us in battling undead?"
    	[/message]
    	[message]
    		speaker=Nunglef
    		message= _ "Wait, a fish that talks? You dont see those far in the mountains, haha I would gladly join you... for a price."
    	[/message]
    	[message]
    		[option]
    			label= _ "If you are talking about gold..."
    		[/option]
    		[option]
    			label= _ "If you are talking about fame and glory..."
    		[/option]
    	[/message]
    	[message]
    		speaker=Nunglef
    		message= _ "Oh no no no no, I just meant to try your foods and beverages, that is why I came so far south."
    	[/message]
    	[message]
    		speaker=Danielle
    		message= _ "Deal. (I hope he doesn't mind fighting alongside us in the LOCATION OF FINAL BATTE)." ##-----------------------------------------------------------
    	[/message]
    [/event]

    [event]
    	name=moveto
    	[filter]
    		side=1
    		x=53
    		y=13
    	[/filter]
    	{REMOVE_IMAGE 53 13}
    	{NAMED_GENERIC_UNIT 1 "Elvish Druid" 53 13 "Enilmia" "Enilmia"} ##All this TBD
    	[modify_unit]
    		[filter]
    			id=Enilmia
    		[/filter]
    		[effect]
    			apply_to=experience
    			set=58
    		[/effect]
    	[/modify_unit]
    	[message]
    		speaker=Enilmia
    		message= _ "Thank you for saving me, little ones. I shall heal your wounds so I can repay you the debt I now owe."
    	[/message]
    	[message]
    		speaker=Danielle
    		message= _ "You are more than welcome"
    	[/message]
    [/event]

    ## -------------------------------------- GALLEON EVENTS ------------------------------

    [event]
    	name=turn 7
    	{NAMED_GENERIC_UNIT 5 "Transport Galleon" 1 25 "gal1" "Sea crawler"}
    	{NAMED_GENERIC_UNIT 5 "Transport Galleon" 1 25 "gal2" "Wave rider"}
    	{NAMED_GENERIC_UNIT 5 "Transport Galleon" 1 25 "gal3" "The quick one"}
    	{CLEAR_FOG 7 25 7}
        [redraw]
        	side=1
        [/redraw]
        {SCROLL_TO 7 25}
        [sound]
        	name=ambient/ship.ogg
        	repeat=0
        [/sound]
        [delay]
        	time=1000
        [/delay]
    	[message]
    		speaker=Danielle
    		message= _ "Finally, the fleet is here, we have to defend our land army!"
    	[/message]

    	#First ship movement is un-macroed

    	[move_unit]
    		id=gal1
    		to_x=8
    		to_y=23
    	[/move_unit]
    	[move_unit]
    		id=gal2
    		to_x=8
    		to_y=28
    	[/move_unit]
    	[move_unit]
    		id=gal3
    		to_x=8
    		to_y=26
    	[/move_unit]
    	[modify_turns]
    		value=-1
    	[/modify_turns]
    	[objectives]
            side=1
            [objective]
                condition=win
                description= _ "At least one of the Galleons makes it to the west side of the map"
            [/objective]
            [objective]
                condition=win
                description= _ "Kill enemy leaders"
            [/objective]
            [objective]
            	condition=lose
             	description= _ "Death of Danielle"
            [/objective]
            [objective]
            	condition=lose
             	description= _ "All galleons are destroyed"
            [/objective]
            [gold_carryover]
                bonus=no
                carryover_percentage=40
            [/gold_carryover]
            note= _ "Galleons will avoid shallow water"
        [/objectives]
    [/event]

    {MOVE_GALLEON 15 21 gal1 8}
    {MOVE_GALLEON 15 20 gal2 8}# Checked
    {MOVE_GALLEON 15 27 gal3 8}

    {MOVE_GALLEON 20 21 gal1 9}
    {MOVE_GALLEON 20 20 gal2 9}# Checked
    {MOVE_GALLEON 20 27 gal3 9}

    {MOVE_GALLEON 25 26 gal1 10}
    {MOVE_GALLEON 25 22 gal2 10}# Checked
    {MOVE_GALLEON 25 24 gal3 10}

    {MOVE_GALLEON 30 26 gal1 11}
    {MOVE_GALLEON 30 22 gal2 11}# Checked
    {MOVE_GALLEON 30 24 gal3 11}

    {MOVE_GALLEON 35 27 gal1 12}
    {MOVE_GALLEON 35 23 gal2 12}# Checked
    {MOVE_GALLEON 35 25 gal3 12}

    {MOVE_GALLEON 40 29 gal1 13}
    {MOVE_GALLEON 40 23 gal2 13}# Checked
    {MOVE_GALLEON 40 28 gal3 13}

    {MOVE_GALLEON 45 33 gal1 14}
    {MOVE_GALLEON 45 25 gal2 14}# Checked
    {MOVE_GALLEON 45 32 gal3 14}

    {MOVE_GALLEON 50 31 gal1 15}
    {MOVE_GALLEON 50 27 gal2 15}# Checked
    {MOVE_GALLEON 50 29 gal3 15}

    {MOVE_GALLEON 55 32 gal1 16}
    {MOVE_GALLEON 55 28 gal2 16}# Checked
    {MOVE_GALLEON 55 30 gal3 16}

    {MOVE_GALLEON 60 33 gal1 17}
    {MOVE_GALLEON 59 28 gal2 17}# Checked
    {MOVE_GALLEON 60 31 gal3 17}

    {MOVE_GALLEON 64 30 gal1 18}
    {MOVE_GALLEON 62 26 gal2 18}# Checked (LAST AUTOMATED POINT)
    {MOVE_GALLEON 63 29 gal3 18}

    ## Galleons get stuck

    [event]
    	name=unit placed
    	first_time_only=yes
    	[filter]
    		side=5
    		x=63,62,64
    		y=29,26,30
    	[/filter]
    	{SCROLL_TO 62 28}
    	[sound]
    		name=mace.ogg
    		repeat=0
    	[/sound]
    	[if]
    		[variable]
    			name=gal_killed
    			less_than=2
    		[/variable]
    		[then]
    		[message]
    			speaker=Danielle
    			message= _ "Oh no, galleons are getting stuck!"
    		[/message]
    		[/then]
    		[else]
    			[message]
    				speaker=Danielle
    				message= _ "Oh no, the galleon is stuck!"
    			[/message]
    		[/else]
    	[/if]
    [/event]

    ## Unstuck the boats, maybe three lvl 1 units needed (Or one lvl 2 and two lvl 1s), two lvl 2s or one level 3.

	{TOW_GALLEON 64 30 gal1 67 30}
    {TOW_GALLEON 62 26 gal2 66 25}
    {TOW_GALLEON 63 29 gal3 66 28}

    ## Galleons resume their movement after being unstuck

    {MOVE_GALLEON 72 27 gal1 $gal1_turn_1}
    {MOVE_GALLEON 68 22 gal2 $gal2_turn_1}# 
    {MOVE_GALLEON 67 24 gal3 $gal3_turn_1}

    {MOVE_GALLEON 75 23 gal1 $gal1_turn_2}
    {MOVE_GALLEON 72 21 gal2 $gal2_turn_2}# 
    {MOVE_GALLEON 71 22 gal3 $gal3_turn_2}

    {MOVE_GALLEON 77 21 gal1 $gal1_turn_3}
    {MOVE_GALLEON 75 22 gal2 $gal2_turn_3}# 
    {MOVE_GALLEON 76 21 gal3 $gal3_turn_3}

    {MOVE_GALLEON 79 19 gal1 $gal1_turn_4}
    {MOVE_GALLEON 78 19 gal2 $gal2_turn_4}# 
    {MOVE_GALLEON 79 20 gal3 $gal3_turn_4}

    {MOVE_GALLEON 80 17 gal1 $gal1_turn_5}
    {MOVE_GALLEON 80 15 gal2 $gal2_turn_5}# 
    {MOVE_GALLEON 80 16 gal3 $gal3_turn_5}


    ## When galleons get stuck, they need at least two merfolk units to continue moving.



    ## Makes galleons disappear at the end of their track
    [event]
    	name=unit placed
    	first_time_only=no
    	[filter]
    		side=5
    		x=80
    		y=1-50
    	[/filter]
    	[message]
    		speaker=Danielle
    		message= _ "A galleon has arrived!"
    	[/message]
    	[kill]
    		x=$x1
    		y=$y1
    	[/kill]
    	[set_variable]
    		name=gal_saved
    		add=1
    	[/set_variable]
    [/event]

    ## ------------------------------- END OF GALLEON EVENTS ------------------------------

    ## ------------------------------------- DEATH EVENTS ---------------------------------

    {VIU_LAST_BREATH Danielle (_ "Oh, I die... I failed as a Kai to all of the mermen.")}
    {VIU_LAST_BREATH Okean (_ "I hope there is life after this... I want to see my kind flourish again.")}
    {VIU_LAST_BREATH Nunglef (_ "I should have never accepted to come with you... but I loved fighting by your side, Kai Dani... el eh")}
    {VIU_LAST_BREATH Skrasssn (_ "Sksksskskssssss... ss...")}
    {VIU_LAST_BREATH (Mal Rufinal) (_ "Nyeeehhhhhhh")}

    ## ---------------------------------- END OF DEATH EVENTS -----------------------------

    ## -------------------------------------- W/L EVENTS ----------------------------------

    [event]
    	name=last breath
    	first_time_only=no
    	[filter]
    		side=5
    	[/filter]
    	[message]
    		speaker=Danielle
    		message= _ "Oh no! we had many men on that ship."
    	[/message]
    	[set_variable]
    		name=gal_killed
    		add=1
    	[/set_variable]
    	[if]
    		[variable]
    			name=gal_killed
    			equals=1
    		[/variable]
    		[then]
    			[message]
    				id=Danielle
    				message= _ "Only two ships remain!"
    			[/message]
    		[/then]
    		[elseif]
    			[variable]
    				name=gal_killed
    				equals=2
    			[/variable]
    			[then]
    				[message]
    					id=Danielle
    					message= _ "Only one ship remains!"
    				[/message]
    			[/then]
    		[/elseif]
    		[elseif]
    			[variable]
    				name=gal_killed
    				equals=3
    			[/variable]
    			[then]
    				[message]
    					id=Danielle
    					message= _ "Without a land army, we are lost."
    				[/message]
    				[endlevel]
    					result=defeat
    				[/endlevel]
    			[/then]
    		[/elseif]
    	[/if]
    [/event]

    [event]
    	name=victory
    	[message]
    		speaker=Danielle
    		message= _ "Onwards my men!"
    	[/message]
    [/event]

    [event]
    	name=side 1 turn refresh
    	first_time_only=no
    	[if]
    		[not]
    			[have_unit]
    				side=5
    			[/have_unit]
    		[/not]
    		[and]
    			[variable]
    				name=gal_killed
    				less_than=3
    			[/variable]
    			[and]
    				[variable]
    					name=turn_number
    					greater_than=20
    				[/variable]
    				[and]
    					[variable]
    						name=already_asked_to_leave
    						equals=0
    					[/variable]
    				[/and]
    			[/and]
    		[/and]
    		[then]
    			[set_variable]
        			name=already_asked_to_leave
    				value=1
    			[/set_variable]
    			[message]
    				speaker=Danielle
    				message= _ "We have every floating galleon accounted for, but maybe there are some thing I would like to do before leaving"
    				[option]
    					label= _ "Stay"
    					[command]
    						[set_variable]
        						name=turn_extension
        						value=$turn_number
        					[/set_variable]
        					[set_variable]
        						name=turn_extension
#ifdef EASY
        						add=12
#endif
#ifdef NORMAL
        						add=10
#endif
#ifdef HARD
        						add=6
#endif
        					[/set_variable]
        					[modify_turns]
    							value=$turn_extension
    						[/modify_turns]
    					[/command]
    				[/option]
    				[option]
    					label= _ "Leave"
    					[command]
    						[endlevel]
    							result=victory
    						[/endlevel]
    						{CLEAR_VARIABLE already_asked_to_leave,gal_killed,turn_extension,unit_comes_back,pushing_units,gal1_is_unstuck,gal2_is_unstuck,gal3_is_unstuck,turn_gal1_unstuck,turn_gal2_unstuck,turn_gal3_unstuck}
    					[/command]
    				[/option]
    			[/message]
    		[/then]
    	[/if]
    [/event]
    [event]
    	name=turn $turn_extension end
    	{CLEAR_VARIABLE already_asked_to_leave,gal_killed,turn_extension,unit_comes_back,pushing_units,gal1_is_unstuck,gal2_is_unstuck,gal3_is_unstuck,turn_gal1_unstuck,turn_gal2_unstuck,turn_gal3_unstuck}
    	[endlevel]
    		result=victory
    	[/endlevel]
    [/event]
    ## ------------------------------- END OF W/L EVENTS ----------------------------

[/scenario]
